<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Document RAG</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #0f1117;
            --bg-secondary: #1a1b23;
            --bg-tertiary: #252631;
            --bg-hover: #2d2e3a;
            --border: #363745;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --accent-dim: rgba(99, 102, 241, 0.15);
            --green: #22c55e;
            --green-dim: rgba(34, 197, 94, 0.15);
            --red: #ef4444;
            --red-dim: rgba(239, 68, 68, 0.15);
            --orange: #f59e0b;
            --orange-dim: rgba(245, 158, 11, 0.15);
            --radius: 10px;
            --radius-sm: 6px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }

        /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
        .app {
            display: flex;
            height: 100vh;
        }

        /* ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ */
        .sidebar {
            width: 280px;
            min-width: 280px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-header h1 {
            font-size: 16px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar-header h1 .icon { font-size: 20px; }

        .sidebar-header p {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .sidebar-actions {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
        }

        .new-collection-form {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .new-collection-form input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            outline: none;
        }

        .new-collection-form input:focus {
            border-color: var(--accent);
        }

        .btn {
            padding: 8px 14px;
            border-radius: var(--radius-sm);
            border: none;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.15s;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }
        .btn-primary:hover { background: var(--accent-hover); }

        .btn-danger {
            background: var(--red-dim);
            color: var(--red);
        }
        .btn-danger:hover { background: var(--red); color: white; }

        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
        }
        .btn-ghost:hover { background: var(--bg-hover); color: var(--text-primary); }

        .btn-sm { padding: 5px 10px; font-size: 12px; }

        .btn-block { width: 100%; justify-content: center; }

        .collection-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px;
        }

        .collection-item {
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.15s;
            margin-bottom: 2px;
        }

        .collection-item:hover { background: var(--bg-hover); }

        .collection-item.active {
            background: var(--accent-dim);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }

        .collection-item .info {
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        .collection-item .name {
            font-size: 13px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .collection-item .meta {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .collection-item .delete-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 14px;
            opacity: 0;
            transition: all 0.15s;
        }

        .collection-item:hover .delete-btn { opacity: 1; }
        .collection-item .delete-btn:hover { color: var(--red); background: var(--red-dim); }

        /* ‚îÄ‚îÄ Main Panel ‚îÄ‚îÄ */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .tabs-bar {
            display: flex;
            border-bottom: 1px solid var(--border);
            background: var(--bg-secondary);
            padding: 0 16px;
        }

        .tab-btn {
            padding: 14px 20px;
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.15s;
        }

        .tab-btn:hover { color: var(--text-secondary); }

        .tab-btn.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        .tab-panel { display: none; }
        .tab-panel.active { display: block; }

        /* ‚îÄ‚îÄ Documents Tab ‚îÄ‚îÄ */
        .add-doc-form {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 24px;
        }

        .add-doc-form h3 {
            font-size: 14px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
        }

        .form-group label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-family: inherit;
            outline: none;
            resize: vertical;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--accent);
        }

        .doc-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .doc-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: border-color 0.15s;
        }

        .doc-card:hover { border-color: var(--accent); }

        .doc-card .doc-info h4 {
            font-size: 14px;
            margin-bottom: 4px;
        }

        .doc-card .doc-info .doc-meta {
            font-size: 12px;
            color: var(--text-muted);
            display: flex;
            gap: 12px;
        }

        .doc-card .doc-info .doc-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* ‚îÄ‚îÄ Query Tab ‚îÄ‚îÄ */
        .query-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .query-form {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 24px;
        }

        .query-form h3 {
            font-size: 14px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .query-input-row {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .answer-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            margin-bottom: 16px;
            line-height: 1.7;
            font-size: 14px;
            white-space: pre-wrap;
        }

        .answer-box h3 {
            font-size: 14px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--green);
        }

        .sources-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
        }

        .sources-box h3 {
            font-size: 14px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--orange);
        }

        .source-item {
            padding: 12px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm);
            margin-bottom: 8px;
            font-size: 13px;
        }

        .source-item:last-child { margin-bottom: 0; }

        .source-item .source-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .source-item .source-label {
            font-weight: 700;
            color: var(--accent);
        }

        .source-item .similarity {
            font-size: 11px;
            padding: 2px 8px;
            background: var(--green-dim);
            color: var(--green);
            border-radius: 12px;
            font-weight: 600;
        }

        .source-item .source-path {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .source-item .source-preview {
            color: var(--text-secondary);
            font-size: 12px;
            line-height: 1.5;
        }

        /* ‚îÄ‚îÄ Loading ‚îÄ‚îÄ */
        .loading {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
            font-size: 13px;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* ‚îÄ‚îÄ Empty State ‚îÄ‚îÄ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .empty-state .icon { font-size: 48px; margin-bottom: 16px; }
        .empty-state h3 { font-size: 16px; color: var(--text-secondary); margin-bottom: 8px; }
        .empty-state p { font-size: 13px; }

        /* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 600;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        .toast.success { background: var(--green-dim); color: var(--green); border: 1px solid var(--green); }
        .toast.error { background: var(--red-dim); color: var(--red); border: 1px solid var(--red); }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 768px) {
            .sidebar { width: 240px; min-width: 240px; }
            .form-row { flex-direction: column; }
            .query-input-row { flex-direction: column; }
        }

        @media (max-width: 600px) {
            .app { flex-direction: column; }
            .sidebar {
                width: 100%;
                min-width: 100%;
                max-height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }
            .collection-list { max-height: 100px; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><span class="icon">üìö</span> Multi-Doc RAG</h1>
                <p>Colecciones de documentos</p>
            </div>

            <div class="sidebar-actions">
                <div class="new-collection-form">
                    <input type="text" id="newCollName" placeholder="Nombre de colecci√≥n..." />
                    <input type="text" id="newCollDesc" placeholder="Descripci√≥n (opcional)" />
                    <button class="btn btn-primary btn-block btn-sm" onclick="createCollection()">
                        Ôºã Nueva Colecci√≥n
                    </button>
                </div>
            </div>

            <div class="collection-list" id="collectionList">
                <!-- Populated dynamically -->
            </div>
        </aside>

        <!-- Main Panel -->
        <div class="main">
            <div class="tabs-bar">
                <button class="tab-btn active" data-tab="documents" onclick="switchTab('documents')">
                    üìÑ Documentos
                </button>
                <button class="tab-btn" data-tab="query" onclick="switchTab('query')">
                    üîç Consultar
                </button>
            </div>

            <div class="tab-content">
                <!-- Documents Tab -->
                <div class="tab-panel active" id="tab-documents">
                    <div id="docContent">
                        <div class="empty-state">
                            <div class="icon">üëà</div>
                            <h3>Selecciona una colecci√≥n</h3>
                            <p>Elige o crea una colecci√≥n en el sidebar para gestionar sus documentos</p>
                        </div>
                    </div>
                </div>

                <!-- Query Tab -->
                <div class="tab-panel" id="tab-query">
                    <div class="query-section">
                        <div class="query-form">
                            <h3>üîç Consultar documentos</h3>
                            <div class="form-group" style="margin-bottom: 12px;">
                                <label>Buscar en</label>
                                <select id="queryCollection">
                                    <option value="">üìÇ Todas las colecciones</option>
                                </select>
                            </div>
                            <div class="query-input-row">
                                <div class="form-group" style="flex: 1;">
                                    <label>Pregunta</label>
                                    <input type="text" id="queryInput" placeholder="Escribe tu pregunta..." 
                                           onkeydown="if(event.key==='Enter') submitQuery()" />
                                </div>
                                <button class="btn btn-primary" onclick="submitQuery()" id="queryBtn">
                                    Consultar
                                </button>
                            </div>
                        </div>

                        <div id="queryResults"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedCollection = null;
        let collections = [];

        // ‚îÄ‚îÄ API helpers ‚îÄ‚îÄ
        async function api(url, opts = {}) {
            const resp = await fetch(url, {
                headers: { 'Content-Type': 'application/json' },
                ...opts,
            });
            if (!resp.ok) {
                const err = await resp.json().catch(() => ({ detail: resp.statusText }));
                throw new Error(err.detail || 'API Error');
            }
            return resp.json();
        }

        function toast(msg, type = 'success') {
            const el = document.createElement('div');
            el.className = `toast ${type}`;
            el.textContent = msg;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 3000);
        }

        // ‚îÄ‚îÄ Tabs ‚îÄ‚îÄ
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b.dataset.tab === tab));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.toggle('active', p.id === `tab-${tab}`));
            if (tab === 'query') loadQueryCollections();
        }

        // ‚îÄ‚îÄ Collections ‚îÄ‚îÄ
        async function loadCollections() {
            try {
                collections = await api('/collections');
                renderCollections();
            } catch (e) {
                toast(e.message, 'error');
            }
        }

        function renderCollections() {
            const list = document.getElementById('collectionList');
            if (collections.length === 0) {
                list.innerHTML = `<div class="empty-state" style="padding:30px 10px">
                    <div class="icon">üìÅ</div>
                    <p>Sin colecciones a√∫n</p>
                </div>`;
                return;
            }
            list.innerHTML = collections.map(c => `
                <div class="collection-item ${selectedCollection === c.id ? 'active' : ''}" 
                     onclick="selectCollection(${c.id})">
                    <div class="info">
                        <div class="name">üìÅ ${esc(c.name)}</div>
                        <div class="meta">${c.doc_count} doc${c.doc_count !== 1 ? 's' : ''}${c.description ? ' ¬∑ ' + esc(c.description) : ''}</div>
                    </div>
                    <button class="delete-btn" onclick="event.stopPropagation(); deleteCollection(${c.id}, '${esc(c.name)}')" title="Eliminar">üóë</button>
                </div>
            `).join('');
        }

        async function createCollection() {
            const name = document.getElementById('newCollName').value.trim();
            const desc = document.getElementById('newCollDesc').value.trim();
            if (!name) return toast('Nombre requerido', 'error');
            try {
                await api('/collections', {
                    method: 'POST',
                    body: JSON.stringify({ name, description: desc || null }),
                });
                document.getElementById('newCollName').value = '';
                document.getElementById('newCollDesc').value = '';
                toast('Colecci√≥n creada');
                loadCollections();
            } catch (e) {
                toast(e.message, 'error');
            }
        }

        async function deleteCollection(id, name) {
            if (!confirm(`¬øEliminar colecci√≥n "${name}" y todos sus documentos?`)) return;
            try {
                await api(`/collections/${id}`, { method: 'DELETE' });
                if (selectedCollection === id) {
                    selectedCollection = null;
                    renderDocContent();
                }
                toast('Colecci√≥n eliminada');
                loadCollections();
            } catch (e) {
                toast(e.message, 'error');
            }
        }

        function selectCollection(id) {
            selectedCollection = id;
            renderCollections();
            loadDocuments();
        }

        // ‚îÄ‚îÄ Documents ‚îÄ‚îÄ
        async function loadDocuments() {
            if (!selectedCollection) return;
            const coll = collections.find(c => c.id === selectedCollection);
            const docContent = document.getElementById('docContent');
            docContent.innerHTML = `<div class="loading"><div class="spinner"></div> Cargando documentos...</div>`;
            try {
                const docs = await api(`/collections/${selectedCollection}/documents`);
                renderDocPanel(coll, docs);
            } catch (e) {
                toast(e.message, 'error');
            }
        }

        function renderDocContent() {
            document.getElementById('docContent').innerHTML = `
                <div class="empty-state">
                    <div class="icon">üëà</div>
                    <h3>Selecciona una colecci√≥n</h3>
                    <p>Elige o crea una colecci√≥n en el sidebar para gestionar sus documentos</p>
                </div>`;
        }

        function renderDocPanel(coll, docs) {
            const panel = document.getElementById('docContent');
            panel.innerHTML = `
                <div class="add-doc-form">
                    <h3>‚ûï Agregar documento a <strong>${esc(coll.name)}</strong></h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>T√≠tulo *</label>
                            <input type="text" id="docTitle" placeholder="T√≠tulo del documento" />
                        </div>
                        <div class="form-group">
                            <label>Fuente</label>
                            <input type="text" id="docSource" placeholder="URL, libro, etc. (opcional)" />
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom:12px">
                        <label>Contenido *</label>
                        <textarea id="docContent2" rows="6" placeholder="Pega aqu√≠ el contenido del documento..."></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="addDocument()" id="addDocBtn">
                        üìÑ Agregar Documento
                    </button>
                    <span id="addDocLoading" style="display:none" class="loading">
                        <div class="spinner"></div> Procesando y generando embeddings...
                    </span>
                </div>

                <h3 style="margin-bottom:12px; font-size:14px;">
                    üìë Documentos (${docs.length})
                </h3>

                ${docs.length === 0 ? `
                    <div class="empty-state">
                        <div class="icon">üìÑ</div>
                        <h3>Sin documentos</h3>
                        <p>Agrega documentos usando el formulario de arriba</p>
                    </div>
                ` : `
                    <div class="doc-list">
                        ${docs.map(d => `
                            <div class="doc-card">
                                <div class="doc-info">
                                    <h4>üìÑ ${esc(d.title)}</h4>
                                    <div class="doc-meta">
                                        <span>üß© ${d.chunk_count} chunks</span>
                                        ${d.source ? `<span>üîó ${esc(d.source)}</span>` : ''}
                                        <span>üìÖ ${new Date(d.created_at).toLocaleDateString()}</span>
                                    </div>
                                </div>
                                <button class="btn btn-danger btn-sm" onclick="deleteDocument(${d.id})">üóë</button>
                            </div>
                        `).join('')}
                    </div>
                `}
            `;
        }

        async function addDocument() {
            const title = document.getElementById('docTitle').value.trim();
            const source = document.getElementById('docSource').value.trim();
            const content = document.getElementById('docContent2').value.trim();

            if (!title || !content) return toast('T√≠tulo y contenido son requeridos', 'error');

            const btn = document.getElementById('addDocBtn');
            const loading = document.getElementById('addDocLoading');
            btn.disabled = true;
            loading.style.display = 'inline-flex';

            try {
                const result = await api(`/collections/${selectedCollection}/documents`, {
                    method: 'POST',
                    body: JSON.stringify({ title, source: source || null, content }),
                });
                toast(`Documento agregado (${result.chunk_count} chunks)`);
                loadDocuments();
                loadCollections();
            } catch (e) {
                toast(e.message, 'error');
            } finally {
                btn.disabled = false;
                loading.style.display = 'none';
            }
        }

        async function deleteDocument(id) {
            if (!confirm('¬øEliminar este documento y sus chunks?')) return;
            try {
                await api(`/documents/${id}`, { method: 'DELETE' });
                toast('Documento eliminado');
                loadDocuments();
                loadCollections();
            } catch (e) {
                toast(e.message, 'error');
            }
        }

        // ‚îÄ‚îÄ Query ‚îÄ‚îÄ
        function loadQueryCollections() {
            const sel = document.getElementById('queryCollection');
            sel.innerHTML = `<option value="">üìÇ Todas las colecciones</option>` +
                collections.map(c => `<option value="${c.id}">üìÅ ${esc(c.name)} (${c.doc_count} docs)</option>`).join('');
        }

        async function submitQuery() {
            const question = document.getElementById('queryInput').value.trim();
            if (!question) return toast('Escribe una pregunta', 'error');

            const collId = document.getElementById('queryCollection').value;
            const results = document.getElementById('queryResults');
            const btn = document.getElementById('queryBtn');

            btn.disabled = true;
            btn.textContent = '‚è≥ Buscando...';
            results.innerHTML = `<div class="loading"><div class="spinner"></div> Buscando en documentos y generando respuesta...</div>`;

            try {
                const data = await api('/query', {
                    method: 'POST',
                    body: JSON.stringify({
                        question,
                        collection_id: collId ? parseInt(collId) : null,
                    }),
                });
                renderQueryResults(data);
            } catch (e) {
                results.innerHTML = '';
                toast(e.message, 'error');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Consultar';
            }
        }

        function renderQueryResults(data) {
            const el = document.getElementById('queryResults');
            el.innerHTML = `
                <div class="answer-box">
                    <h3>‚úÖ Respuesta</h3>
                    <div>${formatAnswer(data.answer)}</div>
                </div>
                ${data.sources.length > 0 ? `
                    <div class="sources-box">
                        <h3>üìã Fuentes utilizadas (${data.sources.length})</h3>
                        ${data.sources.map(s => `
                            <div class="source-item">
                                <div class="source-header">
                                    <span class="source-label">[Fuente ${s.index}] ${esc(s.document)}</span>
                                    <span class="similarity">${(s.similarity * 100).toFixed(1)}%</span>
                                </div>
                                <div class="source-path">üìÅ ${esc(s.collection)} ¬∑ chunk #${s.chunk_index}${s.source ? ' ¬∑ üîó ' + esc(s.source) : ''}</div>
                                <div class="source-preview">${esc(s.preview)}</div>
                            </div>
                        `).join('')}
                    </div>
                ` : ''}
            `;
        }

        function formatAnswer(text) {
            return esc(text)
                .replace(/\[Fuente (\d+)\]/g, '<strong style="color:var(--accent)">[Fuente $1]</strong>')
                .replace(/\n/g, '<br>');
        }

        function esc(s) {
            if (!s) return '';
            const d = document.createElement('div');
            d.textContent = s;
            return d.innerHTML;
        }

        // ‚îÄ‚îÄ Init ‚îÄ‚îÄ
        loadCollections();
    </script>
</body>
</html>
